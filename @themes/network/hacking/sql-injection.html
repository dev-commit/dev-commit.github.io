<!-- TODO:
<f-search>Network -> Hacking -> SQL инъекции</f-search>
-->

<h2>SQL инъекции</h2>

<ul class="list-point">
    <li><u-text-define>SQL инъекции</u-text-define> - один из самых доступных способов взлома сайта</li>
    <li>Суть таких инъекций - внедрение в данные (передаваемые через GET, POST запросы или значения Cookie) произвольного SQL кода. Если сайт уязвим и выполняет такие инъекции, то по сути есть возможность творить с БД (чаще всего это MySQL) что угодно</li>
</ul>

<!-- xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx -->
<h3>Способы борьбы</h3>
<!-- xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx -->
<ul class="list-point">
    <li><u-text-define>Parametrised Queries (Параметризованные запросы)</u-text-define> - разделяют SQL-код и пользовательские данные, передавая их отдельно. Это не позволяет злоумышленнику внедрить вредоносные SQL-команды в запрос, так как данные всегда обрабатываются как значения, а не как исполняемый код.</li>
    <li>Фильтрует SQL инъекции</li>
</ul>

<!------------------------------------------------------------->
<h4>Принцип работы</h4>
<!------------------------------------------------------------->
<ul class="list-point">
    <li>Разделение кода и данных: Вместо того, чтобы напрямую вставлять пользовательский ввод в SQL-строку, используются заполнители (плейсхолдеры). </li>
    <li>Отдельная передача данных: Пользовательские данные передаются в базу данных отдельно от самого SQL-запроса, например, через объект PreparedStatement в Java. </li>
    <li>Гарантия безопасности: База данных обрабатывает эти данные как значения, а не как часть SQL-кода. Даже если злоумышленник попытается ввести SQL-команды, они будут восприняты как обычные строки, а не как инструкции для базы данных. </li>
</ul>

<!------------------------------------------------------------->
<h4>Пример</h4>
<!------------------------------------------------------------->
<v-two-border title="Fine;Badly"><template v-slot:first>
<v-code lang="js" title="">
// С параметризацией (безопасно)
// ? — это заполнитель
SELECT * FROM users WHERE login = ?
</v-code>
<ul>
    <li>В этом случае, при попытке ввода ' OR '1'='1', база данных обработает это как строку для поиска пользователя с логином ' OR '1'='1', а не как SQL-код. </li>
</ul>

</v-code>
</template><template v-slot:last>
<v-code lang="js" title="">
// Без параметризации (уязвимо)
SELECT * FROM users WHERE login = ' + username + ';
</v-code>
<ul>
    <li>Если username будет ' OR '1'='1, запрос превратится в SELECT * FROM users WHERE login = '' OR '1'='1', что позволит получить все записи из таблицы. </li>
    <li>В этом случае, при попытке ввода ' OR '1'='1', база данных обработает это как строку для поиска пользователя с логином ' OR '1'='1', а не как SQL-код. </li>
</ul>

</template></v-two-border>
