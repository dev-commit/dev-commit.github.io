<h2>cypress-visual-regression</h2>

<u-message-info>
–§–æ—Ä–º–∏—Ä—É–µ—Ç —Ñ–∞–π–ª —Å –æ—Ç–ª–∏—á–∏—è–º–∏ –≤ –≤—ë—Ä—Å—Ç–∫–µ –≤ "./cypress/snapshots/diff"
</u-message-info>

<u-link-wrapper>
    <v-link url="https://github.com/cypress-visual-regression/cypress-visual-regression" text="" list="true" />
</u-link-wrapper>

<v-pre-npm>
npm i --save-dev <u-code-accent>cypress-visual-regression</u-code-accent>
</v-pre-npm>


<!-- xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx -->
<h3>–ù–∞—Å—Ç—Ä–æ–π–∫–∏</h3>
<!-- xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx -->
<v-tabs :tabs="['package.json', 'cypress.config.ts', 'cypress / tsconfig.json']">
<template v-slot:1>
<v-code lang="json" title="">
{
  "devDependencies": {
    "cypress": "^13.16.0",
    "cypress-visual-regression": "^5.2.2",
  }
}
</v-code>
</template>
<template v-slot:2>
<v-code lang="js" title="">
import { defineConfig } from "cypress";
import { configureVisualRegression } from "cypress-visual-regression";

export default defineConfig({
  e2e: {
    baseUrl: "http://localhost:5173",
    viewportWidth: 1280,
    viewportHeight: 720,
    video: false,
    screenshotOnRunFailure: true,
    supportFile: "cypress/support/e2e.ts",
    defaultCommandTimeout: 10000,
    pageLoadTimeout: 30000,
    requestTimeout: 10000,
    responseTimeout: 30000,
    retries: {
      runMode: 2,
      openMode: 1,
    },
    env: {
      visualRegressionType: "regression",
      visualRegressionBaseDirectory: "cypress/snapshot/base",
      visualRegressionDiffDirectory: "cypress/snapshot/diff",
      visualRegressionGenerateDiff: "always",
      visualRegressionFailSilently: false,
    },
    screenshotsFolder: "./cypress/snapshot/actual",
    // –ü–æ–¥–∫–ª—é—á–∞–µ–º –ø–ª–∞–≥–∏–Ω –¥–ª—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è —Å–∫—Ä–∏–Ω—à–æ—Ç–æ–≤
    setupNodeEvents(on, config) {
      configureVisualRegression(on);
    },
  },
});
</v-code>
</template>
<template v-slot:3>
<v-code lang="js" title="">
{
  "compilerOptions": {
    "target": "es5",
    "lib": ["es5", "dom"],
    "types": ["cypress", "node"],
    "esModuleInterop": true,
    "strict": true,
    "skipLibCheck": true,
    "moduleResolution": "node"
  },
  "include": ["**/*.ts", "../cypress.config.ts"],
  "ts-node": {
    "transpileOnly": true,
    "compilerOptions": {
      "module": "ES2015"
    }
  }
}
</v-code>
</template>
</v-tabs>

<!-- xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx -->
<h3>–î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è cypress</h3>
<!-- xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx -->

<ul class="list-point">
    <li>–í–Ω—É—Ç—Ä–∏ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π <u>"actual"</u>, <u>"base"</u> –∏ <u>"diff"</u> –æ–¥–∏–Ω–∞–∫–æ–≤—ã–π –ø—É—Ç—å –∫ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—é: <i>\cypress\e2e\test.cy.ts\original.png</i></li>
</ul>

<v-tree>
üìÇ <u-code-mod>cypress</u-code-mod>
	üìÇ <b>e2e</b>
		‚Ä∫ <s>test.cy.ts</s>
    üìÇ <b>snapshot</b>
		üìÇ <b>actual</b> # –¢–µ–∫—É—â–µ–π —Å–∫—Ä–∏–Ω—à–æ—Ç —ç–∫—Ä–∞–Ω–∞
		üìÇ <b>base</b>   # –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –¥–ª—è —Å–≤–µ—Ä–∫–∏
		üìÇ <b>diff</b>   # –†–∞–∑–Ω–∏—Ü–∞ –º–µ–∂–¥—É —Ç–µ–∫—É—â–∏–º –∏ –±–∞–∑–æ–≤—ã–º –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º
	üìÇ <b>support</b>
		‚Ä∫ <s>e2e.ts</s>
    ‚Ä∫ <s>tsconfig.json</s>
</v-tree>

<v-tabs :tabs="['support / e2e.ts', 'e2e / test.cy.ts']">
<template v-slot:1>
<v-code lang="js" title="">
import { addCompareSnapshotCommand } from "cypress-visual-regression/dist/command";

addCompareSnapshotCommand({
  // –î–µ–ª–∞—Ç—å —Å–∫—Ä–∏–Ω—à–æ—Ç —Ç–æ–ª—å–∫–æ –≤–∏–¥–∏–º–æ–π –æ–±–ª–∞—Å—Ç–∏ —ç–ª–µ–º–µ–Ω—Ç–∞
  capture: "viewport",

  // –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –¥–æ–ø—É—Å—Ç–∏–º–∞—è —Ä–∞–∑–Ω–∏—Ü–∞ –º–µ–∂–¥—É –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è–º–∏ (–æ—Ç 0 –¥–æ 1)
  // 0.1 –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ —Ä–∞–∑–ª–∏—á–∞—Ç—å—Å—è –º–æ–∂–µ—Ç –Ω–µ –±–æ–ª–µ–µ 10% –ø–∏–∫—Å–µ–ª–µ–π
  // errorThreshold: 0.1,
  errorThreshold: 0,

  // –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –ø–∏–∫—Å–µ–ª–µ–π
  pixelmatchOptions: {
    // –£—Ä–æ–≤–µ–Ω—å —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –ø—Ä–∏ —Å—Ä–∞–≤–Ω–µ–Ω–∏–∏ –ø–∏–∫—Å–µ–ª–µ–π (–æ—Ç 0 –¥–æ 1)
    // 0 - –ø–∏–∫—Å–µ–ª–∏ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –∞–±—Å–æ–ª—é—Ç–Ω–æ –∏–¥–µ–Ω—Ç–∏—á–Ω—ã–º–∏
    // –ó–Ω–∞—á–µ–Ω–∏—è –±–æ–ª—å—à–µ 0 –ø–æ–∑–≤–æ–ª—è—é—Ç –Ω–µ–±–æ–ª—å—à–∏–µ —Ä–∞–∑–ª–∏—á–∏—è –≤ —Ü–≤–µ—Ç–µ
    threshold: 0.01,
  },
});
</v-code>
</template>
<template v-slot:2>

<ul class="list-point">
    <li><u>original</u> - –Ω–∞–∑–≤–∞–Ω–∏–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –¥–ª—è —Å–≤–µ—Ä–∫–∏ –∏–∑ <i>cypress\snapshot\base\cypress\e2e\test.cy.ts\original.png</i></li>
</ul>

<v-code lang="js" title="">
describe("–ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π —Ç–µ—Å—Ç-–∫–µ–π—Å", () => {
  it("–°–æ–∑–¥–∞–Ω–∏–µ —Å–∫—Ä–∏–Ω—à–æ—Ç–∞", () => {
    // –î–µ–ª–∞–µ–º —Å–∫—Ä–∏–Ω—à–æ—Ç —Ç–æ–ª—å–∫–æ –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–≥–æ –±–ª–æ–∫–∞ 
    cy.get(".className").compareSnapshot("original");
  });
});
</v-code>
</template>
</v-tabs>
