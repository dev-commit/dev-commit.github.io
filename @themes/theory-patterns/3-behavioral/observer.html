<h2>Observer (Наблюдатель)</h2>

<ul class="list-point">
    <li><u-text-define>«Наблюдатель»</u-text-define> - поведенческий паттерн проектирования, который создаёт механизм подписки, позволяющий одним объектам отслеживать и реагировать на события, происходящие в других объектах</li>

    <li>Основан на зависимости один ко многим: при изменении состояния одного объекта (Observer), все зависимые объекты (Observable) оповещаются об этом. Самое главное в общении этих двух объектов, что не нужна прямая связь между объектом и субъектом. Это позволяет добиться модульности клиентской части кода</li>
    <li><u>Observable</u> (Издатели) - наблюдаемый объект. Содержит список [Observer] и если у него что-то происходит, всех оповещает в цикле. Когда в издателе будет происходить важное событие, он будет проходиться по списку подписчиков и оповещать их об этом, вызывая определённый метод объектов-подписчиков</li>
    <li><u>[Observer]</u> (Подписчики) - наблюдатели (кучка объектов) за Observable</li>
</ul>



Задача: хранить данные от которых зависит несколько компонентов в одном объекте / классе, который играет роль Store.


<!-- xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx -->
<h3>Реализация</h3>
<!-- xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx -->

<ul class="list-point">
    <li><u-code>state</u-code> - свойство, от изменения которого зависит состояние других объектов</li>
    <li><u-code>subscribers</u-code> - список зависящих от <u>state</u> объектов</li>
    <li><u-code-text>subscribe</u-code-text> - подписка на изменения <u>state</u></li>
    <li><u-code-text>unsubscribe</u-code-text> - отписка от изменений <u>state</u></li>
    <li><u-code-text>setState</u-code-text> - метод для измененеия <u>state</u></li>
    <li><u-code-text>notify</u-code-text> - метод для оповещение подписчиков об изменении <u>state</u></li>
</ul>

<v-code lang="js border" title="">
class Observable {
  constructor() {
    this.state = 'initial data';
    this.subscribers = [];
  }
  <u-code>subscribe</u-code>(subscriber) {
    this.subscribers.push(subscriber);
  }
  <u-code>unsubscribe</u-code>(subscriber) {
    this.subscribers = this.subscribers.filter(el => el !== subscriber);
  }
  <u-code>setState</u-code>(data) {
    this.state = data;
    this.notify();
  }
  <u-code>notify</u-code>() {
    this.subscribers.forEach(el => el.update(this.state));
  }
}

class Subscriber {
  update(data) {
    console.log(data);
  }
}

const observable = new Observable();
const subscriber = new Subscriber();

observable.subscribe(subscriber);
// observable.unsubscribe(subscriber);
observable.setState('new data');
</v-code>
