<h2>Модульное тестирование</h2>

<ul class="list-point">
	<li>Vue CLI предоставляет опции для модульного тестирования с помощью <u>Jest</u> или <u>Mocha</u>, которые работают из коробки. Также есть официальный пакет <u>Vue Test Utils</u>, который предоставляет более подробное руководство для пользовательских конфигураций</li>
	<li>Для тестирования компонента нужно просто импортировать его вместе с Vue, и использовать обыкновенные операторы контроля (здесь в качестве примера мы используем операторы контроля expect в стиле Jasmine/Jest)</li>
	<li>Тесты <u>end-to-end</u> гарантирует, что несколько компонентов хорошо взаимодействуют друг с другом. Они находятся на более высоком уровне. Примерами таких тестов может быть тестирование регистрации, входа и изменения данных у пользователя. Они работают медленнее, чем модульные тесты или тестирование снимками</li>
</ul>

<!-- xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx -->
<h3>Vue Test Utils</h3>
<!-- xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx -->
<ul class="list-point">
	<li><u>Vue Test Utils</u> тестирует компоненты Vue монтируя их изолированно, создавая моки необходимых входных данных (входные параметры, инъекции и пользовательские события) и выполняя проверки над результатом (результат рендеринга, вызванные пользовательские события)</li>
	<li>Примонтированные компоненты возвращаются внутри Wrapper, который предоставляет множество удобных методов для манипулирования, перемещения и различных запросов для экземпляра компонента Vue</li>
</ul>

<v-code lang="js" title="">
// Импортируем метод `mount()` из `vue-test-utils`
// и компонент, который хотим протестировать
import { mount } from '@vue/test-utils'
import Counter from './counter'

// Теперь монтируем компонент и у нас появляется wrapper
const wrapper = mount(Counter)

// Вы можете получить доступ к экземпляру Vue через `wrapper.vm`
const vm = wrapper.vm

// Чтобы изучить wrapper подробнее, просто выведите его в консоль
// и ваши приключения с `vue-test-utils` начнутся
console.log(wrapper)
</v-code>

<!------------------------------------------------------------->
<h4>Тестирование отрендеренного HTML компонента</h4>
<!------------------------------------------------------------->
<ul class="list-point">
	<li>Теперь, когда у нас есть wrapper, первой вещью, которую мы можем захотеть проверить что отрендеренный HTML компонента соответствует нашим ожиданиям</li>
</ul>

<v-code lang="js" title="">
import { mount } from '@vue/test-utils'
import Counter from './counter'

describe('Компонент Counter', () => {
	// Теперь монтируем компонент и получаем wrapper
	const wrapper = mount(Counter)

	it('отображает корректную разметку', () => {
		expect(wrapper.html()).toContain('&lt;span class="count"&gt;0&lt;/span&gt;')
	})

	// также легко проверить наличие других элементов
	it('имеет кнопку', () => {
		expect(wrapper.contains('button')).toBe(true)
	})
})
</v-code>
