<h2>eval</h2>

<ul class="list-point">
	<li><u-text-define>eval(code)</u-text-define> выполняет код, переданный ей в виде строки и возвращает последнее вычисленное выражение</li>
	<li>Код будет выполнен в <u>текущей области видимости</u></li>
</ul>

<!------------------------------------------------------------->
<h4>Выполнение кода</h4>
<!------------------------------------------------------------->
<v-code lang="js" title="">
const a = 1;

(function() {
	const a = 2;
	eval('alert(a)'); // 2
})()
</v-code>

<!------------------------------------------------------------->
<h4>Вызов eval возвращает последнее вычисленное выражение</h4>
<!------------------------------------------------------------->
<v-code lang="js" title="">
const a = eval('1+1'); // 2
</v-code>

<!------------------------------------------------------------->
<h4>При вызове eval имеет полный доступ к локальным переменным (<u>не рекомендуется</u>)</h4>
<!------------------------------------------------------------->
<v-code lang="js" title="">
const x = 5;
eval("alert(x); x = 10"); // 5, доступ к старому значению
alert(x);                 // 10, значение изменено внутри eval
</v-code>

<!------------------------------------------------------------->
<h4>В строгом режиме eval имеет свою область видимости</h4>
<!------------------------------------------------------------->
<v-code lang="js" title="">
"use strict";
eval("const a = 5; function f() { }");
alert(a); // ошибка, переменная не определена
// функция f тоже не видна снаружи
// eval имеет свою область видимости, а к внешним переменным обращается через замыкание, аналогично тому, как работают обычные функции
</v-code>

<!------------------------------------------------------------->
<h4>Запуск скрипта в глобальной области</h4>
<!------------------------------------------------------------->
<v-code lang="js" title="">
const a = 1;

(function( {
	const a = 2;
	<u-code>window.eval</u-code>(' alert(a) '); // 1, выполнено глобально везде
})();
</v-code>
