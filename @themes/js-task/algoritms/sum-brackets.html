<h2>Сумма произвольного количества скобок</h2>

<!------------------------------------------------------------->
<h4>#1</h4>
<!------------------------------------------------------------->
<v-code lang="js" title="">
function sum() {
    let total = 0;
    let f = function (val) {
        if (typeof val === "undefined") {
            return total;
        }
        total += val;
        return f
    }
    return f.apply(null, arguments)
}

console.log(sum() === 0);
console.log(sum(1)(2)(3)() === 6);
console.log(sum(10)(5)(5)(80)() === 100);
console.log(typeof sum(100) === "function");
</v-code>

<!------------------------------------------------------------->
<h4>#2 Learn.Javascript.Ru</h4>
<!------------------------------------------------------------->
<v-code lang="js" title="">
function sum(a) {
	var currentSum = a;
	function f(b) {
		currentSum += b;
		return f;
	}
	f.toString = function() {
		return currentSum;
	};
	return f;
}

console.log(sum(1)(2));             // 3
console.log(sum(5)(-1)(2));         // 6
console.log(sum(6)(-1)(-2)(-3));    // 0
console.log(sum(0)(1)(2)(3)(4)(5)); // 15
</v-code>

<!------------------------------------------------------------->
<h4>#3 Фиксированное окончание пустым значением</h4>
<!------------------------------------------------------------->
<v-code lang="js" title="">
console.log(sum(1)(2)(3)()); // 6
function sum(arg) {
    let result = arg;
    let f = function(value) {
        if(value === indefined) {
            return result;
        }
        result += value;
        return f;
    }
    return f;
}
</v-code>

<!------------------------------------------------------------->
<h4>#4 Добавление числа</h4>
<!------------------------------------------------------------->
<v-code lang="js" title="">
console.log(sum(1)(2)(3) + 5); // 11

function sum(arg) {
    let result = arg;
    let f = function(value) {

        if(value === indefined) {
            return result;
        }
        result += value;
        return f;
    }

    f.toString = function() {
        return result;
    }
    return f;
}
</v-code>

<v-code lang="js" title="">
// разбор
// let a = sum(1);
// let a1 = a(2);
// let a2 = a1(3);
// let result = 6;
// a2 = function(value) {
//         if(value === indefined) {
//             return result;
//         }
//         result += value;
//         return f;
//     }
// a2.valueOf() + 5
</v-code>

<!------------------------------------------------------------->
<h4>#5</h4>
<!------------------------------------------------------------->
<!-- Матвеев -->

<v-code lang="js" title="">
function sum(num) {
    let result = num || 0;

    function sum2(n) {
        if (typeof n === 'undefined') {
            return result;
        }
        result += n;
        return sum2;
    }

    sum2.toString = () => result;
}

console.log(sum(1)(2)(3)); // 6
</v-code>
