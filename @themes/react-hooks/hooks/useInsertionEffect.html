<!-- TODO:
<f-search>React -> Hooks -> useInsertionEffect()</f-search>
-->

<h2>Хук useInsertionEffect()</h2>

<u-link-wrapper>
    <a href="https://react.dev/reference/react/useInsertionEffect" target="_blank">useInsertionEffect</a>
</u-link-wrapper>

<u-message-warn>
useInsertionEffect предназначен для авторов библиотек CSS-in-JS. Если вы не работаете с библиотекой CSS-in-JS и вам не нужно место для внедрения стилей, вы, вероятно, захотите вместо этого использовать useEffect или useLayoutEffect.
</u-message-warn>

<div class="v-method-wrapper">
    <v-method before="" method="useInsertionEffect" after="" arg="(setup, dependencies?)">
    Версия useEffect, которая срабатывает перед любыми изменениями DOM
    </v-method>
	<v-method-arg arg="setup">функция с Effect’s logic. Ваша setup function также может дополнительно возвращать функцию очистки. Прежде чем ваш компонент будет добавлен в DOM, React запустит вашу setup function. После каждого повторного рендеринга с измененными зависимостями React сначала запускает функцию очистки (если вы ее предоставили) со старыми значениями, а затем запускает setup function с новыми значениями. Прежде чем ваш компонент будет удален из DOM, React запустит вашу функцию очистки</v-method-arg>
	<v-method-arg arg="dependencies?">(optional) список всех реактивных значений, на которые ссылается setup code</v-method-arg>
    <v-method-return>undefined</v-method-return>
</div>

<v-code lang="js border" title="">
import { useInsertionEffect } from 'react';

// Inside your CSS-in-JS library
const useCSS = (rule) => {
    <u-code>useInsertionEffect</u-code>(() => {
        // ... inject &lt;style&gt; tags here ...
    });

    return rule;
}
</v-code>
