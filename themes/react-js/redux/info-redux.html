<h2>Redux</h2>

<v-pre-npm>
npm i --save <u-code-npm>redux</u-code-npm>
</v-pre-npm>

<u-link-wrapper>
    <a href="https://redux.js.org/introduction/getting-started" target="_blank">Документация</a>
    <a href="https://getinstance.info/articles/react/learning-react-redux/" target="_blank">Новый уровень React: Redux</a>
</u-link-wrapper>

<!------------------------------------------------------------->
<h4>Принципы</h4>
<!------------------------------------------------------------->
<ol class="list-num">
    <li>Единственный источник истины</li>
    <li>Состояние доступно только для чтения</li>
    <li>Изменения делаются «чистыми» функциями</li>
</ol>

<!------------------------------------------------------------->
<h4>Структура файлов</h4>
<!------------------------------------------------------------->
<ul class="list-point">
    <li>Rails Style</li>
    <li>Redux Ducks</li>
</ul>

<!-- xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx -->
<h3>Store</h3>
<!-- xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx -->
<pre><code class="js">
const store = <u-code>createStore</u-code>(reducerFunction); // создание store
store.<u-code>getState</u-code>();                           // получить состояние store
store.<u-code>subscribe</u-code>();                          // подписка на изменение store
store.<u-code>dispatch</u-code>({                            // событие обновления состояния store
    type: 'тип_события', 
    payload: 'данные' 
}); 
</code></pre>

<!-- xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx -->
<h3>Пример использования Redux</h3>
<!-- xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx -->
<pre><code class="js border">
import { createStore } from 'redux';

function changeStore(state = [], action) {
    // console.log(action);
    // => {type: "@@redux/INITn.9.1.1.y.1"}          // всегда когда redux инициализирован
    // => {type: "ADD_PRODUCT", payload: "Product1"} // добавленный action

    if (action.type === 'ADD_PRODUCT') {
        return [
            ...state,
            action.payload
        ];
    }
    return state;
}

const store = <u-code>createStore</u-code>(changeStore);

store.<u-code>subscribe</u-code>(() => {
    console.log('subscribe', store.<u-code>getState</u-code>());
});

store.<u-code>dispatch</u-code>({ type: 'ADD_PRODUCT', payload: 'Product1' });
store.<u-code>dispatch</u-code>({ type: 'ADD_PRODUCT', payload: 'Product2' });
</code></pre>

