<h2>Middleware</h2>

<ul class="list-point">
    <li><u-text-define>Middleware</u-text-define> - (посредник) — функция, которая вызывается при передаче действия ещё до того, как это действие попадёт в <u>reducer</u> и <u>store.</u></li>
    <li>Активировать middleware можно с помощью Redux функции applyMiddleware. Она берёт middleware, которое мы хотим зарегистрировать, и возвращает функцию, которая, в свою очередь, берёт функцию createStore. Затем эта вторая функция создаёт для нас store с уже включённым в него middleware</li>

    <hr>
    <li><u>Middleware</u> - шаблонный способ подцепления к actions, отправляемым в redux store</li>
    <li><u>Middleware</u> - функция, принимающая state и возвращающая функцию</li>
    <li><u>Middleware</u> - функции, которые перехватывают действия</li>

    <hr>
    <li>Суть middleware функций, взять входные данные, добавить что-то и передать дальше. Middleware - это всегда функция, которые обычно возвращают функцию, если только целью middleware не является прервать цепочку вызовов</li>
    <li><u>Применение: </u>от логгирование, обработка исключений, модифицирование действий, кэширование результатов и изменения способа и времени попадания действия в store</li>
</ul>

<v-code lang="js" title="src/redux/store.js">
import { createStore, <u-code>applyMiddleware</u-code> } from 'redux';
import rootReducer from './reducers';
import { ping } from './enhancers/ping';

export default createStore(rootReducer, <u-code>applyMiddleware</u-code>(ping));
</v-code>

<v-code lang="js" title="src/redux/enhancers/ping.js">
export const ping = function ping(store) {
    return function (<u-code>next</u-code>) {
        return function (<u-code>action</u-code>) {
            console.log('Type: '+action.type);               // => Type: ADD_VALUE
            console.log('Payload: '+action.payload.myValue); // => Payload: New Value
            return next(action);
        };
    };
};
</v-code>

<ul class="list-point">
    <li><u-code>store</u-code> - redux-store приложения</li>
    <li><u-code>next</u-code> - функция-обертка, которая позволяет продолжить выполнение цепочки</li>
    <li><u-code>action</u-code> - действие, которое было вызвано (это store.dispatch)</li>
</ul>



