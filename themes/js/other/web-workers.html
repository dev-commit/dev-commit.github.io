<h2>Web Workers</h2>

<ul class="list-point">
	<li>Спецификация Web Workers позволяет запускать дополнительные JavaScript-процессы (workers). Они могут обмениваться сообщениями с главным процессом, но у них свои переменные, и работают они также сами по себе</li>
	<li>Worker - это объект, созданный при помощи конструктора , который запускает JavaScript файл с кодом, который будет выполнен в потоке Worker’а</li>
	<li>Такие дополнительные процессы не имеют доступа к DOM, поэтому они полезны, преимущественно, при вычислениях, чтобы загрузить несколько ядер/процессоров одновременно</li>
	<li>Современные браузеры позволяют порождать подпроцессы Web Workers, они выполняются параллельно и могут отправлять/принимать сообщения, но не имеют доступа к DOM</li>
</ul>

<h4>1. Создание</h4>
<pre><code class="js">
var myWorker = new Worker("worker.js");
</code></pre>

<h4>2.Отправка данных в веб-воркер</h4>
<ul class="list-point">
	<li>У каждого веб воркера, как и у главного потока, имеется свой stack, heap и event loop. Послать сообщения в веб воркер (например, передать данные для расчетов) можно с помощью метода postMessage()</li>
</ul>
<pre><code class="js">
myWorker.postMessage(imageData);
</code></pre>

<h4>3. Событие типа message</h4>
<ul class="list-point">
	<li>Это создаст событие типа message в очередь событий web worker’а, которое будет обработано в следующей итерации event loop воркера</li>
</ul>
<pre><code class="js">
onmessage = function(e) {
	console.log('Message received from main script');
	var workerResult = 'Result: ' + (e.data[0] * e.data[1]);
	console.log('Posting message back to main script');
	postMessage(workerResult);
}
</code></pre>

<h4>4. Отправка данных в главный поток</h4>
<ul class="list-point">
	<li>Аналогично, результаты вычислений и прочие данные воркер может отправить в главный поток с помощью метода postMessage(). И это опять же добавит событие типа message в очередь события главного потока</li>
</ul>
<pre><code class="js">
myWorker.onmessage = function(e) {
	result.textContent = e.data;
	console.log('Message received from worker');
}
</code></pre>
