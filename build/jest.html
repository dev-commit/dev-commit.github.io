
    <!DOCTYPE html>
        <html>
        <head>
            <title>üî∞ Jest</title>
            <meta charset="UTF-8">
            <link rel="icon" type="image/png" href="../src/img/favicon.png">
        
            <script src="../src/js/utils.js"></script>
            <!-- Own JavaScript -->
            <script src="../__modules__/build-jest.js"></script>
        </head>
        <body>
        
            <div id="container">
                <div id="menu">
                    <div id="top">
                        <a href="#links" class="link">
                            <div class="img"></div>
                            <span v-html="'üî∞ Jest'"></span>
                        </a>
                    </div>
                    <h4>ü•• –û—Å–Ω–æ–≤–Ω–æ–µ</h4><ul>  
        <li>
            <a
                class="menu-link"
                id="id__jest/main/info"
                href="#jest/main/info"
            >üìë –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</a>
        </li>
      
        <li>
            <a
                class="menu-link"
                id="id__jest/main/install"
                href="#jest/main/install"
            >üçã –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞</a>
        </li>
      
        <li>
            <a
                class="menu-link"
                id="id__jest/main/mocks"
                href="#jest/main/mocks"
            >Mock</a>
        </li>
    </ul><h4>ü•• –≠–ª–µ–º–µ–Ω—Ç—ã</h4><ul>  
        <li>
            <a
                class="menu-link"
                id="id__jest/elements/pattern"
                href="#jest/elements/pattern"
            >‚ö°Ô∏è –®–∞–±–ª–æ–Ω</a>
        </li>
      
        <li>
            <a
                class="menu-link"
                id="id__jest/elements/functions"
                href="#jest/elements/functions"
            >üî• –ì–ª–æ–±–∞–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏</a>
        </li>
      
        <li>
            <a
                class="menu-link"
                id="id__jest/elements/matchers"
                href="#jest/elements/matchers"
            >üî• Matchers</a>
        </li>
      
        <li>
            <a
                class="menu-link"
                id="id__jest/elements/hooks"
                href="#jest/elements/hooks"
            >üî• –•—É–∫–∏</a>
        </li>
    </ul><h4>ü•• JavaScript</h4><ul>  
        <li>
            <a
                class="menu-link"
                id="id__jest/javascript/sync"
                href="#jest/javascript/sync"
            >1. –°–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã</a>
        </li>
      
        <li>
            <a
                class="menu-link"
                id="id__jest/javascript/async"
                href="#jest/javascript/async"
            >2. –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã</a>
        </li>
      
        <li>
            <a
                class="menu-link"
                id="id__jest/javascript/mock"
                href="#jest/javascript/mock"
            >3. Mock-–¥–∞–Ω–Ω—ã–µ</a>
        </li>
      
        <li>
            <a
                class="menu-link"
                id="id__jest/javascript/mock-axios"
                href="#jest/javascript/mock-axios"
            >4. Mock-–¥–∞–Ω–Ω—ã–µ –≤ Axios</a>
        </li>
    </ul><h4>ü•• Redux</h4><ul>  
        <li>
            <a
                class="menu-link"
                id="id__jest/redux/reducers"
                href="#jest/redux/reducers"
            >Reducers</a>
        </li>
      
        <li>
            <a
                class="menu-link"
                id="id__jest/redux/actions"
                href="#jest/redux/actions"
            >Actions</a>
        </li>
    </ul>
                </div>
        
                <div id="wrapper">
                    <div id="links">
                        <ul>
                            <slot v-for="itemLink in linksContent">
                                <li v-if="itemLink">
                                    <a :href="itemLink.page" :class="'theme-'+itemLink.theme" v-html="itemLink.title"></a>
                                </li>
                                <li v-else class="splitter"></li>
                            </slot>
                        </ul>
                    </div>
                    <div id="content"><div id="jest/main/info"><h2>–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</h2>

<u-link-wrapper>
	<a href="https://jestjs.io/docs/ru/getting-started" target="_blank">Jest</a>
</u-link-wrapper>

<ul class="list-point">
    <li><u-text-define>Jest</u-text-define> - —Ñ—Ä–µ–π–º–≤–æ—Ä–∫ –¥–ª—è –∑–∞–ø—É—Å–∫–∞ —Ç–µ—Å—Ç–æ–≤ (Unit Test)</li>
    <li><b>–î–ª—è —á–µ–≥–æ:</b> –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã, —Ñ—É–Ω–∫—Ü–∏–∏, redux —Ä–µ–¥—é—Å–µ—Ä—ã –∏ –∞–∫—à–µ–Ω—ã</li>
</ul>
</div><div id="jest/main/install"><h2>–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞</h2>

<!-- xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx -->
<h3>–£—Å—Ç–∞–Ω–æ–≤–∫–∞</h3>
<!-- xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx -->

<v-pre-npm>
npm i --save-dev <u-code-npm>jest</u-code-npm>
</v-pre-npm>

<v-code lang="json" title="package.json">
{
	"name": "app-jest",
	"main": "index.js",
	"scripts": {
	"test": "jest"
},
	"devDependencies": {
		"jest": "^25.2.7"
	}
}
</v-code>

<!-- xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx -->
<h3>–ù–∞–ø–∏—Å–∞–Ω–∏–µ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ "expect"</h3>
<!-- xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx -->
<v-code lang="js" title="">
function expect(value) {
	return {
		toBe: exp => {
			if (value === exp) {
				console.log('Success');
			} else {
				console.error('Error', value, exp);
			}
		}
	}	
}

const sum = (a, b) => a + b;

expect(sum(41, 1)).toBe(42);
</v-code>

<!-- xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx -->
<h3>–ò–º–µ–Ω–æ–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–æ–≤ —Ç–µ—Å—Ç–æ–≤</h3>
<!-- xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx -->
<ul class="list-point">
    <li><u-code-list>intro.test.js</u-code-list></li>
    <li><u-code-list>intro.spec.js</u-code-list></li>
</ul>
</div><div id="jest/main/mocks"><h2>–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –º–æ–∫–æ–≤</h2>

<!------------------------------------------------------------->
<h4>1. –ú–æ–∫–∏—Ä–æ–≤–∞—Ç—å –º–æ–¥—É–ª—å –≤–Ω—É—Ç—Ä–∏ —Ñ–∞–π–ª–∞</h4>
<!------------------------------------------------------------->
<v-code lang="js" title="">
jest.mock('moduleName', () => { ... })
</v-code>

<!------------------------------------------------------------->
<h4>2. doMock –±–ª–æ–∫–∏—Ä—É–µ—Ç –≤—Å–ø–ª—ã—Ç–∏–µ –∏ –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –∏–º–ø–ª–µ–º–µ–Ω—Ç–∞—Ü–∏—é</h4>
<!------------------------------------------------------------->
<v-code lang="js" title="">
jest.doMock('moduleName', () => { ... })
</v-code>

<!------------------------------------------------------------->
<h4>3. –ú–æ–∫–∏—Ä–æ–≤–∞–Ω–∏–∏ —Ñ—É–Ω–∫—Ü–∏–∏</h4>
<!------------------------------------------------------------->
<v-code lang="js" title="">
const a = jest.fn().mockImplemention(() => { ... });
</v-code>

<!------------------------------------------------------------->
<h4>4. –ú–æ–∫–∏—Ä–æ–≤–∞–Ω–∏–µ CSS </h4>
<!------------------------------------------------------------->
<v-code lang="js" title="">
// –ü–∞–∫–µ—Ç jest-css-modules
</v-code>

<!------------------------------------------------------------->
<h4>5. –ú–æ–∫–∏—Ä–æ–≤–∞–Ω–∏–µ Axios</h4>
<!------------------------------------------------------------->
<v-code lang="js" title="">
import axios from 'axios';
import Users from './Users';

jest.mock('axios');

it('name', () => {
	const users = [
		{name: 'Jack'}
	];
	
	const resp = { data: users };
	
	axios.get.mockResolvedValue(resp);
	
	return Users.all()
		.then(data => expect(data).toEqual(users))
});
</v-code>
</div><div id="jest/elements/pattern"><h2>–®–∞–±–ª–æ–Ω</h2>

<!------------------------------------------------------------->
<h4>1. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤</h4>
<!------------------------------------------------------------->
<v-code lang="js" title="intro.js">
const sum = (a, b) => a + b;
module.exports = { sum };
</v-code>

<v-code lang="js" title="intro.test.js">
const { sum } = require('./intro');
</v-code>

<!------------------------------------------------------------->
<h4>2. –î–æ–±–∞–≤–ª–µ–Ω–∏–µ Matchers</h4>
<!------------------------------------------------------------->
<v-code lang="js" title="intro.test.js">
test('Common Matchers', () => {
	expect(sum(1, 3)).toBe(4); // –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å "4"
});

test('Numbers Matchers', () => {
	expect(sum(1, 3)).toBeGreaterThan(2); // –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –±–æ–ª—å—à–µ —á–µ–º "2"
});
</v-code>

<!------------------------------------------------------------->
<h4>3. –û—Ç—Ä–∏—Ü–∞–Ω–∏–µ –≤ Matchers</h4>
<!------------------------------------------------------------->
<v-code lang="js" title="intro.test.js">
test('Common Matchers', () => {
	expect(sum(1, 3)).not.toBe(5); // –Ω–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å "5" 
});
</v-code>

<!------------------------------------------------------------->
<h4>4. –û–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ —Ç–µ—Å—Ç-–∫–µ–π—Å–æ–≤</h4>
<!------------------------------------------------------------->
<v-code lang="js" title="intro.test.js">
describe('Sum function', () => {
	test('Common Matchers', () => {
		expect(sum(1, 3)).toBe(4);
	});

	test('Numbers Matchers', () => {
		expect(sum(1, 3)).toBeGreaterThan(2);
	});
});
</v-code>

</div><div id="jest/elements/functions"><h2>–ì–ª–æ–±–∞–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏</h2>

<ul class="list-point">
    <li><u-code-text>test()</u-code-text> - —Ç–µ—Å—Ç-–∫–µ–π—Å</li>
    <li><u-code-text>expect()</u-code-text> - —Ç–µ—Å—Ç –Ω–∞ –æ–∂–∏–¥–∞–µ–º–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ</li>
    <li><u-code-text>describe()</u-code-text> - –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ —Ç–µ—Å—Ç-–∫–µ–π—Å–æ–≤</li>
</ul>
</div><div id="jest/elements/matchers"><h2>Matchers (–í—ã—á–∏—Å–ª–∏—Ç–µ–ª–∏)</h2>

<!------------------------------------------------------------->
<h4>–û—Å–Ω–æ–≤–Ω—ã–µ –≤—ã—á–∏—Å–ª–∏—Ç–µ–ª–∏</h4>
<!------------------------------------------------------------->
<ul class="list-point">
    <li><u-code-text>toBe</u-code-text> - –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å —Ä–∞–≤–Ω–æ –∑–Ω–∞—á–µ–Ω–∏—é (–¥–ª—è –ø—Ä–∏–º–∏—Ç–∏–≤–æ–≤)</li>
    <li><u-code-text>toEqual</u-code-text> - –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å —Ä–∞–≤–Ω–æ –∑–Ω–∞—á–µ–Ω–∏—é. —Ä–µ–∫—É—Ä—Å–∏–≤–Ω–æ–µ —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ –∫–∞–∂–¥–æ–≥–æ –ø–æ–ª—è –¥–ª—è <u>object</u> –∏–ª–∏ <u>array</u></li>
</ul>

<v-code lang="js" title="">
test('–¥–≤–∞ –ø–ª—é—Å –¥–≤–∞ —Ä–∞–≤–Ω–æ —á–µ—Ç—ã—Ä–µ', () => {
    expect(2 + 2).<u-code>toBe</u-code>(4);
});

test('–ø—Ä–∏—Å–≤–∞–∏–≤–∞–Ω–∏–µ –æ–±—ä–µ–∫—Ç—É', () => {
    const data = {–æ–¥–∏–Ω: 1};
    data['–¥–≤–∞'] = 2;
    expect(data).<u-code>toEqual</u-code>({–æ–¥–∏–Ω: 1, –¥–≤–∞: 2});
});
</v-code>

<hr>

<ul class="list-point">
    <li><u>toBe</u> –∏ <u>toEqual</u> —ç–∫–≤–∏–≤–∞–ª–µ–Ω—Ç–Ω—ã –ø–æ –æ—Ç–Ω–æ—à–µ–Ω–∏—é –∫ —á–∏—Å–ª–∞–º</li>
</ul>

<!------------------------------------------------------------->
<h4>–ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –ø—Ä–∞–≤–¥–∏–≤–æ—Å—Ç—å</h4>
<!------------------------------------------------------------->
<ul class="list-point">
    <li><u-code-text>toBeNull</u-code-text> - –∑–Ω–∞—á–µ–Ω–∏–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å <u>null</u></li>
    <li><u-code-text>toBeUndefined</u-code-text> - –∑–Ω–∞—á–µ–Ω–∏–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å <u>undefined</u></li>
    <li><u-code-text>toBeDefined</u-code-text> - –∑–Ω–∞—á–µ–Ω–∏–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–æ (–Ω–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å <u>undefined</u>)</li>
    <li><u-code-text>toBeTruthy</u-code-text> - –¥–∞–µ—Ç <u>true</u> –ø—Ä–∏ <u>if</u> –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏</li>
    <li><u-code-text>toBeFalsy</u-code-text> - –¥–∞–µ—Ç <u>false</u> –ø—Ä–∏ <u>if</u> –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏</li>
</ul>

<v-code lang="js" title="">
test('null', () => {
    const n = null;
    expect(n).toBeNull();
});
</v-code>

<!------------------------------------------------------------->
<h4>–ß–∏—Å–ª–∞</h4>
<!------------------------------------------------------------->
<ul class="list-point">
    <li><u-code-text>toBeGreaterThan</u-code-text> - –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –±–æ–ª—å—à–µ —á–µ–º –∑–Ω–∞—á–µ–Ω–∏–µ</li>
    <li><u-code-text>toBeGreaterThanOrEqual</u-code-text> - –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –±–æ–ª—å—à–µ –∏–ª–∏ —Ä–∞–≤–Ω–æ –∑–Ω–∞—á–µ–Ω–∏—é</li>
    <li><u-code-text>toBeLessThan</u-code-text> - –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –º–µ–Ω—å—à–µ —á–µ–º –∑–Ω–∞—á–µ–Ω–∏–µ</li>
    <li><u-code-text>toBeLessThanOrEqual</u-code-text> - –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –º–µ–Ω—å—à–µ –∏–ª–∏ —Ä–∞–≤–Ω–æ –∑–Ω–∞—á–µ–Ω–∏—é</li>
    <li><u-code-text>toBeCloseTo</u-code-text> - –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å —Ä–∞–≤–Ω–æ <u>float</u> –∑–Ω–∞—á–µ–Ω–∏—é</li>
</ul>

<v-code lang="js" title="">
test('–¥–≤–∞ –ø–ª—é—Å –¥–≤–∞', () => {
    const value = 2 + 2;
    expect(value).toBeGreaterThan(3);
});
</v-code>

<!------------------------------------------------------------->
<h4>–°—Ç—Ä–æ–∫–∏</h4>
<!------------------------------------------------------------->
<ul class="list-point">
    <li><u-code-text>toMatch</u-code-text> - —Å–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ —Å—Ç—Ä–æ–∫ —Å —Ä–µ–≥—É–ª—è—Ä–Ω—ã–º–∏ –≤—ã—Ä–∞–∂–µ–Ω–∏—è–º–∏</li>
</ul>

<v-code lang="js" title="">
test('–≤ –∫–æ–º–∞–Ω–¥–µ –Ω–µ—Ç –º–µ—Å—Ç–∞ –Ø', () => {
    expect('–∫–æ–º–∞–Ω–¥–∞').not.toMatch(/–Ø/);
});
</v-code>

<!------------------------------------------------------------->
<h4>–ú–∞—Å—Å–∏–≤—ã –∏ –ø–µ—Ä–µ–±–∏—Ä–∞–µ–º—ã–µ –æ–±—ä–µ–∫—Ç—ã</h4>
<!------------------------------------------------------------->
<ul class="list-point">
    <li><u-code-text>toContain</u-code-text></li>
</ul>

<v-code lang="js" title="">
const shoppingList = ['–º–µ—à–∫–∏', '–ø–æ–ª–æ—Ç–µ–Ω—Ü–∞', '–ø–∏–≤–æ'];

test('—Å–ø–∏—Å–æ–∫ –ø–æ–∫—É–ø–æ–∫ —Å–æ–¥–µ—Ä–∂–∏—Ç –ø–∏–≤–æ', () => {
    expect(shoppingList).toContain('–ø–∏–≤–æ');
    expect(new Set(shoppingList)).toContain('–ø–∏–≤–æ');
});
</v-code>

<!------------------------------------------------------------->
<h4>Exceptions</h4>
<!------------------------------------------------------------->
<ul class="list-point">
    <li><u-code-text>toThrow</u-code-text> - –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ç–æ–≥–æ, —á—Ç–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ—à–∏–±–∫—É</li>
</ul>

<v-code lang="js" title="">
function compileAndroidCode() {
    throw new Error('you are using the wrong JDK');
}

test('compiling android goes as expected', () => {
    expect(compileAndroidCode).toThrow();
});
</v-code>
</div><div id="jest/elements/hooks"><h2>–•—É–∫–∏</h2>

<ul class="list-point">
    <li><u-code-text>beforeEach</u-code-text> - —Ö—É–∫, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç –≤—ã–∑—ã–≤–∞—Ç—å—Å—è –ü–ï–†–ï–î –∫–∞–∂–¥—ã–º —Ç–µ—Å—Ç-–∫–µ–π—Å–æ–º</li>
    <li><u-code-text>afterEach</u-code-text> - —Ö—É–∫, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç –≤—ã–∑—ã–≤–∞—Ç—å—Å—è –ü–û–°–õ–ï –∫–∞–∂–¥–æ–≥–æ —Ç–µ—Å—Ç-–∫–µ–π—Å–∞</li>
    <li><u-code-text>beforeAll</u-code-text> - —Ö—É–∫, –∑–∞–ø—É—Å—Ç–∏—Ç—Å—è 1 —Ä–∞–∑ –ü–ï–†–ï–î —Ç–µ–º –∫–∞–∫ –∑–∞–ø—É—Å—Ç–∏—Ç—Å—è –ø–µ—Ä–≤—ã–π —Ç–µ—Å—Ç</li>
    <li><u-code-text>afterAll</u-code-text> - —Ö—É–∫, –∑–∞–ø—É—Å—Ç–∏—Ç—Å—è 1 —Ä–∞–∑ –ü–û–°–õ–ï –≤—Å–µ—Ö —Ç–µ—Å—Ç-–∫–µ–π—Å–æ–≤</li>
</ul>

<v-code lang="js" title="">
beforeEach(() => {
	//
})
</v-code>

<ul class="list-point">
    <li>–ï—Å–ª–∏ –µ—Å—Ç—å –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π –∫–æ–¥ –≤ <u>beforeEach</u>, –Ω—É–∂–Ω–æ –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å Promise</li>
</ul>
</div><div id="jest/javascript/sync"><h2>–°–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã</h2>

<v-code lang="js" title="intro.js">
class Lodash {
	// –ø—Ä–∏–Ω–∏–º–∞–µ–º –º–∞—Å—Å–∏–≤ –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –º–∞—Å—Å–∏–≤ –±–µ–∑ "false" –∑–Ω–∞—á–µ–Ω–∏–π
	compact(array) {
		return array.filter(val => !!val)
	}
}

module.exports = Lodash;
</v-code>

<v-code lang="js" title="intro.test.js">
const Lodash = require('./intro');

const _ = new Lodash();

describe('Lodash: compact', () => {
	let array;

	beforeEach(() => {
		array = [false, 42, 0, '', true, null, 'hello'];
	});

	afterAll(() => {
		_ = new Lodash();
	});

	test('should be defined', () => {
		expect(_.compact).toBeDefined();
		// –∏–ª–∏
		expect(_.compact).not.toBeUndefined();
	});

	test('should NOT contain false values', () => {
		expect(_.compact(array)).not.toContain(false);
		expect(_.compact(array)).not.toContain(0);
		expect(_.compact(array)).not.toContain('');
		expect(_.compact(array)).not.toContain(null);
	});

	test('should remove falsy values from array', () => {
		const result = [42, true, 'hello'];
		expect(_.compact(array)).toEqual(result);
	});
});
</v-code>
</div><div id="jest/javascript/async"><h2>–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã</h2>

<v-code lang="js" title="intro.js">
class Ajax {
	static echo(data) {
		return new Promise((resolve, reject) => {
			setTimeout(() => {
				if (data) {
					resolve(data);
				} else {
					reject(new Error('error'));
				}
			}, 150)
		})
	}
}

module.exports = Ajax;
</v-code>

<v-code lang="js" title="intro.test.js">
const Ajax = require('./intro');

describe('Ajax: echo', () => {

	test('return value: async', async () => {
		const result = await Ajax.echo('some data');
		expect(result).toBe('some data');
	});

	test('return value: promise', () => {
		return Ajax.echo('some data')
			.then(data => {
				expect(data).toBe('some data')
			})
	});

	test('return error: promise', () => {
		return Ajax.echo()
			.catch(error => {
				expect(error).toBeInstanceOf(Error)
			})
	});

	test('return error: async', async () => {
		try {
			await Ajax.echo();
		} catch(e) {
			expect(e.message).toBe('error');
		}
	});
});
</v-code>
</div><div id="jest/javascript/mock"><h2>Mock-–¥–∞–Ω–Ω—ã–µ</h2>

<v-code lang="js" title="intro.js">
function map(array, callback) {
	const result = [];

	for (let i=0; i < array.length; i++) {
		result.push(callback(array[i]));
	}

	return result;
}

module.exports = { map };
</v-code>

<v-code lang="js" title="intro.test.js">
const { map } = require('./intro');

describe('Map function', () => {
	let array;
	let fn;

	beforeEach(() => {
		array = [1, 2, 3, 5];
		// –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ callback-—Ñ—É–Ω–∫—Ü–∏–∏
		fn = jest.fn(x => x ** 2);
		map(array, fn);
	});

	test('should call callback', () => {
		expect(fn).toBeCalled();
	});

	test('should call callback 4 times', () => {
		expect(fn).toBeCalledTimes(4);
		// –∏–ª–∏
		expect(fn.mock.calls.length).toBe(4);
	});

	test('should pow 2 each element', () => {
		expect(fn.mock.results[0].value).toBe(1);
		expect(fn.mock.results[1].value).toBe(4);
		expect(fn.mock.results[2].value).toBe(9);
		expect(fn.mock.results[3].value).toBe(25);
	});

	test('should fn work', () => {
		fn
			.mockReturnValueOnce(100) // –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –≤—ã–∑–æ–≤–µ –¥–æ–ª–∂–Ω–∞ –≤–µ—Ä–Ω—É—Ç—å "100"
			.mockReturnValueOnce(200) // –ø—Ä–∏ –≤—Ç–æ—Ä–æ–º –≤—ã–∑–æ–≤–µ –¥–æ–ª–∂–Ω–∞ –≤–µ—Ä–Ω—É—Ç—å "200"
			.mockReturnValue('42')    // –ø—Ä–∏ –æ—Å—Ç–∞–ª—å–Ω—ã—Ö –≤—ã–∑–æ–≤–∞—Ö –¥–æ–ª–∂–Ω–∞ –≤–µ—Ä–Ω—É—Ç—å "42"

		expect(fn()).toBe(100)
		expect(fn()).toBe(200)
		expect(fn()).toBe('42')
		expect(fn()).toBe('42')
	});
});
</v-code>
</div><div id="jest/javascript/mock-axios"><h2>Mock-–¥–∞–Ω–Ω—ã–µ –≤ Axios</h2>

<v-code lang="js" title="intro.js">
const axios = require('axios');

class Ajax {
	static async get() {
		try {
			const response = await axios.get('https://jsonplaceholder.typicode.com/todos');
			return response.data;
		} catch(e) {
			console.log(e);
		}
	}
}

module.exports = Ajax;
</v-code>

<v-code lang="js" title="intro.test.js">
const axios = require('axios');
const Ajax = require('./intro');

jest.mock('axios'); // –º–æ–∫–∞–µ–º axios

describe('Ajax: GET', () => {

	// –∫–æ–≥–¥–∞ –±—É–¥–µ–º –¥–µ–ª–∞—Ç—å –∑–∞–ø—Ä–æ—Å –Ω–∞ —Å–µ—Ä–≤–µ—Ä —á–µ—Ä–µ–∑ axios, jest –æ—Ç–ª–æ–≤–∏—Ç –∑–∞–ø—Ä–æ—Å
	// –∏ –Ω–µ –±—É–¥–µ—Ç –¥–µ–ª–∞—Ç—å –∑–∞–ø—Ä–æ—Å –Ω–∞ —Å–µ—Ä–≤–µ—Ä, –∞ –≤–µ—Ä–Ω–µ—Ç response
	test('should return data from backend', async () => {
		const mockTodos = [
			{ id: 1, title: 'Todo 1', completed: false }
		];

		const mockResponse = {
			data: { todos: mockTodos}
		};

		axios.get.mockReturnValue(mockResponse);

		const resp = await Ajax.get();
		expect(resp.todos).toEqual(mockTodos);
	});
});
</v-code>
</div><div id="jest/redux/reducers"><h2>Reducers</h2>

<ul class="list-point">
    <li><u-text-define>Reducer</u-text-define> - —á–∏—Å—Ç–∞—è —Ñ—É–Ω–∫—Ü–∏—è, –∫–æ—Ç–æ—Ä–∞—è –±–µ—Ä–µ—Ç –Ω–∞ –≤—Ö–æ–¥ <u>–ø—Ä–µ–¥—ã–¥—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ</u> –∏ <u>action</u> –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ–±—ä–µ–∫—Ç –Ω–æ–≤–æ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è</li>
    <li>–ß–µ—Ä–µ–∑ <u-code-text>toEqual</u-code-text> –º–æ–∂–Ω–æ –Ω–∞–ø–∏—Å–∞—Ç—å –æ–∂–∏–¥–∞–Ω–∏–µ –æ–±—ä–µ–∫—Ç–∞, –∫–æ—Ç–æ—Ä—ã–π –Ω—É–∂–µ–Ω</li>
</ul>

<v-code lang="js" title="Constants">
const NEWS_GET_REQUEST = 'NEWS_GET_REQUEST';
const NEWS_GET_SUCCESS = 'NEWS_GET_SUCCESS';
const NEWS_GET_FAILURE = 'NEWS_GET_FAILURE';

const initialState = {
    data: null,
    isLoading: false,
    errorMsg: null,
};
</v-code>


<v-code lang="js" title="Reducers">
const myReducer = (state = initialState, action) => {
    switch (action.type) {
        case NEWS_GET_REQUEST: {
            return {
                ...state,
                isLoading: true,
            };
        }
        case NEWS_GET_SUCCESS: {
            return {
                ...state,
                isLoading: false,
                data: action.payload,
            };
        }
        case NEWS_GET_FAILURE: {
            return {
                ...state,
                isLoading: false,
                errorMsg: action.payload.errorMsg,
            };
        }
        default: {
            return state;
        }
    }
};
</v-code>

<v-code lang="js" title="Tests">
describe('reducer', () => {
    it('NEWS_GET_REQUEST', () => {
        const action = {
            type: NEWS_GET_REQUEST,
        }
        const state = initialState;
        
        expect(myReducer(state, action)).toEqual({
            ...state,
            data: null,
            isLoading: true,
        })
    });
    
    it('NEWS_GET_SUCCESS', () => {
        const action = {
            type: NEWS_GET_SUCCESS,
            payload: [1, 2, 3]
        };

        // —Å–æ—Å—Ç–æ–Ω–∏–µ –∑–∞ 1 —à–∞–≥ –¥–æ action
        const state = {
            data: null,
            isLoading: true,
            errorMsg: null,
        };

        expect(myReducer(state, action)).toEqual({
            ...state,
            data: action.payload,
            isLoading: false,
        })
    });

    it('NEWS_GET_FAILURE', () => {
        const action = {
            type: NEWS_GET_FAILURE,
            payload: {
                errorMsg: '500 server error',
            }
        };

        const state = {
            errorMsg: null,
            data: null,
            isLoading: true,
        };

        expect(myReducer(state, action)).toEqual({
            ...state,
            isLoading: false,
            errorMsg: action.payload.errorMsg,
        })
    });
});
</v-code>
</div><div id="jest/redux/actions"><h2>Actions</h2>

<ul class="list-point">
    <li><u-text-define>Action</u-text-define> - –æ–±—ä–µ–∫—Ç</li>
    <li><u>–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π Action Creater</u> - —Ñ—É–Ω–∫—Ü–∏—è, –∫–æ—Ç–æ—Ä–∞—è –¥–∏—Å–ø–∞—Ç—á–∏—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ action</li>
</ul>

<v-code lang="js" title="Constants">
const NEWS_GET_REQUEST = 'NEWS_GET_REQUEST';
const NEWS_GET_SUCCESS = 'NEWS_GET_SUCCESS';
const NEWS_GET_FAILURE = 'NEWS_GET_FAILURE';
</v-code>

<v-code lang="js" title="Sync Actions">
const newsRequest = () => ({
    type: NEWS_GET_REQUEST,
});

const newsSuccess = (data) => ({
    type: NEWS_GET_SUCCESS,
    payload: data,
});

const newsFailure = (errorMsg = 'Error') => ({
    type: NEWS_GET_FAILURE,
    payload: {
        errorMsg,
    },
    error: true,
});
</v-code>

<v-code lang="js" title="Sync Tests">
describe('Sync Actions', () => {
    it('newsRequest', () => {
        const expectedAction = {
            type: NEWS_GET_REQUEST,
        };

        expect(newsRequest()).toEqual(expectedAction);
    })

    it('newsSuccess', () => {
        const expectedAction = {
            type: NEWS_GET_SUCCESS,
            payload: [1, 2, 3],
        };

        expect(newsSuccess([1, 2, 3])).toEqual(expectedAction);
    })

    it('newsFailure', () => {
        const errorMessage = 'Wrong Password';
        const expectedAction = {
            type: NEWS_GET_FAILURE,
            payload: {
                errorMsg: errorMessage,
            },
            error: true,
        };

        expect(newsFailure(errorMessage)).toEqual(expectedAction);
    })
});
</v-code>

<!-- xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx -->
<h3>–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ action</h3>
<!-- xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx -->
<ul class="list-point">
    <li><u-code-text>fetch-mock</u-code-text>–±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –¥–ª—è "–º–æ–∫–∞" –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤</li>
    <li><u-code-text>redux-mock-store</u-code-text></li>
</ul>
</div></div>
                </div>
            </div>
        
            <!-- CSS -->
            <link rel="stylesheet" type="text/css" href="../src/css/basic.css">
            <link rel="stylesheet" type="text/css" href="../src/css/index.css">
        
            <!-- Libraries -->
            <script src="../src/libs/highlight/highlight.pack.js"></script>
            <script src="../src/libs/vue.js"></script>
        
            <!-- Custom Elements -->
            <script src="../src/components-web/custom-elements.js"></script>
            <link rel="stylesheet" type="text/css" href="../src/components-web/custom-elements.css">
        
            <!-- Vue.js Components -->
            <script src="../src/components-vue/vue-components.js"></script>
            <link rel="stylesheet" type="text/css" href="../src/components-vue/vue-components.css">
        
            <!-- JavaScript -->
            <script src="../src/js/init.js"></script>
            <script src="../__modules__/__links__.js"></script>
            <script src="../src/vue/build.js"></script>
        </body>
    </html>    
